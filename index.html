<!-- 
Changes:
- Created index.html file with basic structure
- Added responsive navigation with Audi quattro® explained and Auto Shanghai 2025
- Added video placeholder section with gradient background
- Removed Google Fonts links to avoid third-party requests
- Wrapped divider in container to match content width
- Removed sidebar element
- Removed favicon reference
- Removed video overlay text
- Integrated Dacast video embed
- Improved responsive handling for mobile devices
- Added Chinese text "第二十一届上海国际汽车工业展览会" above "Auto Shanghai 2025"
- Added JavaScript to force fullscreen when the video plays
- Enhanced fullscreen code for iOS compatibility
- Replaced Dacast player with HTML5 video element for local MP4 playback
- Added custom play button overlay
- Updated JavaScript to control HTML5 video and trigger fullscreen on play
- Updated splash image path to assets/splash.png
- Added 'controls' attribute to video
- Used 'poster' attribute instead of CSS background for splash image
- Modified JS to hide custom play button after first play
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Audi quattro® | Auto Shanghai 2025</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Removed inline style for background - using poster attribute now -->
</head>
<body>
    <header>
        <div class="header-content">
            <div class="logo">
                <span class="audi-text">Audi</span>&nbsp;quattro<sup>®</sup>
            </div>
            <div class="event-container">
                <div class="event-chinese">第二十一届上海国际汽车工业展览会</div>
                <div class="event">Auto Shanghai 2025</div>
            </div>
        </div>
        <div class="divider-container">
            <div class="divider"></div>
        </div>
    </header>

    <main>
        <div class="video-container">
            <div class="video-embed" id="video-wrapper">
                <video 
                    id="audi-video"
                    src="assets/25_0415_SMS25_QUATTRO_EXPLAINED_v22.mp4"
                    poster="assets/splash.png"
                    controls
                    playsinline 
                    preload="auto" 
                    style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;">
                    Your browser does not support the video tag.
                </video>
                <button id="play-button" class="play-button-overlay" aria-label="Play Video"></button>
            </div>
        </div>
    </main>

    <script>
        (function() {
            const videoWrapper = document.getElementById('video-wrapper');
            const video = document.getElementById('audi-video');
            const playButton = document.getElementById('play-button');
            const iOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
            let hasPlayedOnce = false; // Track if the video has been played at least once

            // --- Fullscreen Request Logic (remains the same) ---
            function requestFullscreen(element) {
                if (iOS && element.tagName === 'VIDEO' && element.webkitEnterFullscreen) {
                    element.webkitEnterFullscreen();
                    return;
                }
                if (element.requestFullscreen) {
                    element.requestFullscreen();
                } else if (element.webkitRequestFullscreen) { 
                    element.webkitRequestFullscreen();
                } else if (element.mozRequestFullScreen) { 
                    element.mozRequestFullScreen();
                } else if (element.msRequestFullscreen) { 
                    element.msRequestFullscreen();
                } else if (video.webkitEnterFullscreen) {
                    video.webkitEnterFullscreen();
                }
            }

            // --- Event Listeners ---
            playButton.addEventListener('click', function() {
                if (!hasPlayedOnce) {
                    hasPlayedOnce = true;
                }
                playButton.style.display = 'none'; // Hide overlay button permanently after click
                video.play(); 
                // Request fullscreen slightly after play starts
                setTimeout(() => requestFullscreen(video), 150); 
            });

            // When video starts playing (either via button or native controls if they appear before first play)
            video.addEventListener('play', function() {
                 if (!hasPlayedOnce) {
                    hasPlayedOnce = true;
                 }
                 playButton.style.display = 'none'; // Ensure overlay button is hidden
                 
                 // Trigger fullscreen automatically only on the *initial* play triggered by our button/logic
                 // Check if already fullscreen
                 if (!document.fullscreenElement && !document.webkitFullscreenElement && !document.mozFullScreenElement && !document.msFullscreenElement && !(video.webkitDisplayingFullscreen)) {
                    // We only trigger auto-fullscreen if the play event fires shortly after the button click
                    // This avoids re-triggering fullscreen if the user pauses and plays using native controls
                    // Note: This check might be imperfect. A more robust way involves checking event trigger, but this is simpler.
                    // Let's keep the fullscreen request here for now, as the main interaction is the first click.
                    setTimeout(() => requestFullscreen(video), 150);
                 }
            });

            // Native controls will handle pause/play after the first interaction.
            // We no longer need to show the custom button on pause or end.
            /* 
            video.addEventListener('pause', function() {
                if (!video.ended && !hasPlayedOnce) { // Only show if never played
                   // playButton.style.display = 'block'; 
                }
            });
            
             video.addEventListener('ended', function() {
                 // playButton.style.display = 'block'; // Don't show on end if using native controls
                 if (document.exitFullscreen) {
                    document.exitFullscreen();
                 } else if (document.webkitExitFullscreen) {
                    document.webkitExitFullscreen();
                 } else if (document.mozCancelFullScreen) {
                    document.mozCancelFullScreen();
                 } else if (document.msExitFullscreen) {
                    document.msExitFullscreen();
                 }
            });
            */
            
            // We might still want to exit fullscreen on video end
             video.addEventListener('ended', function() {
                 if (document.exitFullscreen) document.exitFullscreen();
                 else if (document.webkitExitFullscreen) document.webkitExitFullscreen();
                 else if (document.mozCancelFullScreen) document.mozCancelFullScreen();
                 else if (document.msExitFullscreen) document.msExitFullscreen();
             });

            // Fullscreen change handling - no longer needed to show/hide custom button
            /*
            document.addEventListener('fullscreenchange', handleFullscreenChange);
            document.addEventListener('webkitfullscreenchange', handleFullscreenChange);
            document.addEventListener('mozfullscreenchange', handleFullscreenChange);
            document.addEventListener('MSFullscreenChange', handleFullscreenChange);

            function handleFullscreenChange() {
                 const isFullscreen = !!(document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement);
                 // Don't manage button visibility based on fullscreen changes anymore
            }
            
             if(iOS) {
                 video.addEventListener('webkitendfullscreen', function() {
                    // Don't manage button visibility based on fullscreen changes anymore
                 });
             }
            */

        })();
    </script>
</body>
</html> 
